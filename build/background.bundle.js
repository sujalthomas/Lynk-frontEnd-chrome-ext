(()=>{console.log("This is the background page."),chrome.runtime.onInstalled.addListener((function(e){if("install"==e.reason){const e=`chrome-extension://${chrome.runtime.id}/newtab.html`;chrome.tabs.create({url:e})}else e.reason})),chrome.runtime.onMessage.addListener((function(e,n,t){if("openNewTab"==e.action)return chrome.tabs.create({url:"newtab.html"},(function(e){chrome.runtime.lastError?t({message:"Failed to open new tab."}):t({message:"New tab opened."})})),!0}));let e=null,n=null;chrome.storage.sync.get(["apiKey","token"],(function(t){e=t.apiKey,n=t.token})),chrome.runtime.onMessage.addListener((function(t,o,s){"SET_API_KEY"===t.type?(e=t.apiKey,chrome.storage.sync.set({apiKey:e}),s({message:"API key received successfully!"})):"SET_TOKEN"===t.type&&(n=t.token,chrome.storage.sync.set({token:n}),s({message:"Token received successfully!"}))})),chrome.runtime.onMessage.addListener((function(e,n,t){if("GET_DATA"===e.type)return chrome.storage.sync.get(["apiKey","token"],(function(e){t({token:e.token,apiKey:e.apiKey})})),!0}))})();