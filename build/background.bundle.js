(()=>{console.log("This is the background page."),chrome.runtime.onInstalled.addListener((function(e){if("install"==e.reason){const e=`chrome-extension://${chrome.runtime.id}/newtab.html`;chrome.tabs.create({url:e})}else e.reason})),chrome.runtime.onMessage.addListener((function(e,n,o){if("openNewTab"==e.action)return chrome.tabs.create({url:"newtab.html"},(function(e){chrome.runtime.lastError?o({message:"Failed to open new tab."}):o({message:"New tab opened."})})),!0}));let e=null,n=null;chrome.runtime.onMessage.addListener((function(o,t,s){"SET_API_KEY"===o.type?(console.log("Received API key in background script:",o.apiKey),e=o.apiKey,console.log("Stored API Key:",e),s({message:"API key received successfully!"})):"SET_TOKEN"===o.type&&(console.log("Received token in background script:",o.token),n=o.token,s({message:"Token received successfully!"}))})),chrome.runtime.onMessage.addListener((function(o,t,s){"GET_DATA"===o.type&&s({token:n,apiKey:e})}))})();